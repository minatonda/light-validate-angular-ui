!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("light-validate")):"function"==typeof define&&define.amd?define("light-validate-angular-ui",["exports","@angular/core","light-validate"],e):e((t=t||self)["light-validate-angular-ui"]={},t.ng.core,t.lightValidate)}(this,function(t,e,i){"use strict";function n(t,e,i,n){var a,l=arguments.length,r=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var o=t.length-1;o>=0;o--)(a=t[o])&&(r=(l<3?a(r):l>3?a(e,i,r):a(e,i))||r);return l>3&&r&&Object.defineProperty(e,i,r),r}function a(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}var l=function(){function t(t){this.elementRef=t,this.uiLightOnValidate=new e.EventEmitter}return t.prototype.ngOnInit=function(){this.initialize(this.elementRef.nativeElement)},t.prototype.initialize=function(t){var e=this,n=this.getHtmlErrorElement(t);if(this.isIconEnabled(t)){var a=this.getHtmlIconElement(t);!t.parentNode.contains(a)&&t.parentNode.insertBefore(a,t)}var l=function(){t.parentNode.contains(n)&&t.parentNode.removeChild(n),t.parentElement.classList.remove(e.getElementInvalidClass(t)),t.parentElement.classList.add(e.getElementValidClass(t)),e.uiLightOnValidate.emit(null)},r=function(i){var a=i.shift();a?(n.innerHTML=a.code,!t.parentNode.contains(n)&&t.parentNode.appendChild(n),t.parentElement.classList.add(e.getElementInvalidClass(t)),t.parentElement.classList.remove(e.getElementValidClass(t)),e.uiLightOnValidate.emit(a)):l()},o=!0;this.isValidateOnBlurEnabled(t)&&(t.onblur=function(t){o=!1,i.validate(e.uiLightTarget,e.uiLightValidate,e.uiLightProperty).then(function(){return l()}).catch(function(t){return r(t)}).finally(function(){})}),this.isValidateOnChangeEnabled(t)&&(t.onchange=function(t){o=!1,i.validate(e.uiLightTarget,e.uiLightValidate,e.uiLightProperty).then(function(){return l()}).catch(function(t){return r(t)}).finally(function(){})}),this.isValidateOnBlurEnabled(t)||this.isValidateOnChangeEnabled(t)?t.onkeyup=function(n){var a=t.getAttribute("modal-rule-keydown");o&&!a||i.validate(e.uiLightTarget,e.uiLightValidate,e.uiLightProperty).then(function(){return l()}).catch(function(t){return r(t)}).finally(function(){})}:this.isValidateOnKeyUpEnabled(t)&&(t.onkeyup=function(t){i.validate(e.uiLightTarget,e.uiLightValidate,e.uiLightProperty).then(function(){return l()}).catch(function(t){return r(t)}).finally(function(){})})},t.prototype.isValidateOnBlurEnabled=function(t){return this.getBoolValueFromAttr(t,"ui-light-validate-on-blur",!0)},t.prototype.isValidateOnChangeEnabled=function(t){return this.getBoolValueFromAttr(t,"ui-light-validate-on-change",!0)},t.prototype.isValidateOnKeyUpEnabled=function(t){return this.getBoolValueFromAttr(t,"ui-light-validate-on-keyup",!0)},t.prototype.isIconEnabled=function(t){return this.getBoolValueFromAttr(t,"ui-light-validate-icon-enabled",!1)},t.prototype.getElementInvalidClass=function(t){return t.getAttribute("ui-light-validate-invalid-class")||"light-invalid"},t.prototype.getElementValidClass=function(t){return t.getAttribute("ui-light-validate-valid-class")||"light-valid"},t.prototype.getElementMessageClass=function(t){return t.getAttribute("ui-light-validate-message-class")||"light-message"},t.prototype.getBoolValueFromAttr=function(t,e,i){return void 0===t.getAttribute(e)||""===t.getAttribute(e)||null===t.getAttribute(e)?i:"true"==t.getAttribute(e)},t.prototype.getHtmlIconElement=function(t){var e=document.createElement("div");e.setAttribute("class","light-valid-icon");var i=document.createElement("i");return e.appendChild(i),e},t.prototype.getHtmlErrorElement=function(t){var e=document.createElement("span"),i=this.getElementMessageClass(t);return e.setAttribute("class",i),e},n([e.Input("UiLightValidate"),a("design:type",Object)],t.prototype,"uiLightValidate",void 0),n([e.Input("UiLightProperty"),a("design:type",String)],t.prototype,"uiLightProperty",void 0),n([e.Input("UiLightTarget"),a("design:type",Object)],t.prototype,"uiLightTarget",void 0),n([e.Output("UiLightOnValidate"),a("design:type",e.EventEmitter)],t.prototype,"uiLightOnValidate",void 0),t=n([e.Directive({selector:"[UiLightValidate]"}),a("design:paramtypes",[e.ElementRef])],t)}(),r=function(){function t(){}return t=n([e.NgModule({declarations:[l],exports:[l]})],t)}();t.UiLightValidateDirective=l,t.UiLightValidateModule=r,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=light-validate-angular-ui.umd.min.js.map