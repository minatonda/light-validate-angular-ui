!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("light-validate")):"function"==typeof define&&define.amd?define("light-validate-angular-ui",["exports","@angular/core","light-validate"],e):e((t=t||self)["light-validate-angular-ui"]={},t.ng.core,t.lightValidate)}(this,(function(t,e,n){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */function i(t,e,n,i){var a,r=arguments.length,l=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(t,e,n,i);else for(var o=t.length-1;o>=0;o--)(a=t[o])&&(l=(r<3?a(l):r>3?a(e,n,l):a(e,n))||l);return r>3&&l&&Object.defineProperty(e,n,l),l}var a=new e.InjectionToken("ui-light-validate.resolver"),r=function(){function t(t,n){this.resolver=t,this.el=n,this.onValidate=new e.EventEmitter}var r,l;return t.prototype.ngOnInit=function(){this.initialize(this.el.nativeElement)},t.prototype.initialize=function(t){var e=this,i=this.getHtmlErrorElement(t);if(this.isIconEnabled(t)){var a=this.getHtmlIconElement(t);!t.parentNode.contains(a)&&t.parentNode.insertBefore(a,t)}var r=function(){t.parentNode.contains(i)&&t.parentNode.removeChild(i),t.parentElement.classList.remove(e.getElementInvalidClass(t)),t.parentElement.classList.add(e.getElementValidClass(t)),e.onValidate.emit(null)},l=function(n){var a=n.shift();a?(i.innerHTML=e.resolver?e.resolver.label(a):a.code,!t.parentNode.contains(i)&&t.parentNode.appendChild(i),t.parentElement.classList.add(e.getElementInvalidClass(t)),t.parentElement.classList.remove(e.getElementValidClass(t)),e.onValidate.emit(a)):r()},o=!0;this.isValidateOnBlurEnabled(t)&&(t.onblur=function(t){o=!1,n.validate(e.target,e.validate,e.property).then((function(){return r()})).catch((function(t){return l(t)})).finally((function(){}))}),this.isValidateOnChangeEnabled(t)&&(t.onchange=function(t){o=!1,n.validate(e.target,e.validate,e.property).then((function(){return r()})).catch((function(t){return l(t)})).finally((function(){}))}),this.isValidateOnBlurEnabled(t)||this.isValidateOnChangeEnabled(t)?t.onkeyup=function(i){var a=t.getAttribute("modal-rule-keydown");o&&!a||n.validate(e.target,e.validate,e.property).then((function(){return r()})).catch((function(t){return l(t)})).finally((function(){}))}:this.isValidateOnKeyUpEnabled(t)&&(t.onkeyup=function(t){n.validate(e.target,e.validate,e.property).then((function(){return r()})).catch((function(t){return l(t)})).finally((function(){}))})},t.prototype.isValidateOnBlurEnabled=function(t){return this.getBoolValueFromAttr(t,"ui-light-validate-on-blur",!0)},t.prototype.isValidateOnChangeEnabled=function(t){return this.getBoolValueFromAttr(t,"ui-light-validate-on-change",!0)},t.prototype.isValidateOnKeyUpEnabled=function(t){return this.getBoolValueFromAttr(t,"ui-light-validate-on-keyup",!0)},t.prototype.isIconEnabled=function(t){return this.getBoolValueFromAttr(t,"ui-light-validate-icon-enabled",!1)},t.prototype.getElementInvalidClass=function(t){return t.getAttribute("ui-light-validate-invalid-class")||"light-invalid"},t.prototype.getElementValidClass=function(t){return t.getAttribute("ui-light-validate-valid-class")||"light-valid"},t.prototype.getElementMessageClass=function(t){return t.getAttribute("ui-light-validate-message-class")||"light-message"},t.prototype.getBoolValueFromAttr=function(t,e,n){return void 0===t.getAttribute(e)||""===t.getAttribute(e)||null===t.getAttribute(e)?n:"true"==t.getAttribute(e)},t.prototype.getHtmlIconElement=function(t){var e=document.createElement("div");e.setAttribute("class","light-valid-icon");var n=document.createElement("i");return e.appendChild(n),e},t.prototype.getHtmlErrorElement=function(t){var e=document.createElement("span"),n=this.getElementMessageClass(t);return e.setAttribute("class",n),e},t.ctorParameters=function(){return[{type:void 0,decorators:[{type:e.Inject,args:[a]}]},{type:e.ElementRef}]},i([e.Input("UiLightValidate")],t.prototype,"validate",void 0),i([e.Input("UiLightProperty")],t.prototype,"property",void 0),i([e.Input("UiLightTarget")],t.prototype,"target",void 0),i([e.Output("UiLightOnValidate")],t.prototype,"onValidate",void 0),t=i([e.Directive({selector:"[UiLightValidate]"}),(r=0,l=e.Inject(a),function(t,e){l(t,e,r)})],t)}(),l=function(){function t(){}var n;return n=t,t.forRoot=function(t){return{ngModule:n,providers:[{provide:a,useValue:t}]}},t=n=i([e.NgModule({declarations:[r],exports:[r],providers:[{provide:a,useValue:void 0}]})],t)}();t.UiLightValidateDirective=r,t.UiLightValidateModule=l,t.ɵ0=void 0,t.ɵa=a,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=light-validate-angular-ui.umd.min.js.map